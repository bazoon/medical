%h3 Заболеваемость по участку 
- report "SicknessRate" do |p|
  - p.prepare(sd,ed,years)

  %table.condensed-table.zebra-striped

    %thead
      %tr
        %th Наименование
        -years.each do |k|
          %th{:colspan =>2}= k
      %tr
        %th 
        -years.each do |k|
          %th факт
          %th % 

    %tbody

      - {0 => "Инфекционные и паразитарные болезни",
         1 => "Новообразования",
         2 => "Болезни эндокринной системы",
         3 => "Болезни крови и кроветворной системы",
         4 => "Болезни нервной системы",
         5 => "Болезни уха и сосцевидного отростка",
         6 => "Болезни глаза и его придатков",
         7 => "Болезни системы кровообращения",
         8 => "Болезни органов дыхания",
         9 => "Болезни органов пищеварения",
         10 => "Болезни мочеполовой системы",
         11 => "Болезни кожи и подкожной клетчатки",
         12 => "Болезни костно-мышечной системы",
         13 => "Травмы и отравления"}.each do |k,v|
        %tr
          %td
            =v
            -p.years.each do |year|
              %td= p.observed(year,k)
              %td= p.get_rel(p.observed(year,k),p.year_total(year))
      %tr
        %td
          Всего
          -p.years.each do |year|
            %td= p.year_total(year)
            %td 100 %
